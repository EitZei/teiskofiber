!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){var o,r,i;(function(){var e,s,u,p,l,c,a,f,h,d,g,y,m,v,b;u=Math.floor,d=Math.min,s=function(t,n){return t<n?-1:t>n?1:0},h=function(t,n,e,o,r){var i;if(null==e&&(e=0),null==r&&(r=s),e<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);e<o;)r(n,t[i=u((e+o)/2)])<0?o=i:e=i+1;return[].splice.apply(t,[e,e-e].concat(n)),n},c=function(t,n,e){return null==e&&(e=s),t.push(n),v(t,0,t.length-1,e)},l=function(t,n){var e,o;return null==n&&(n=s),e=t.pop(),t.length?(o=t[0],t[0]=e,b(t,0,n)):o=e,o},f=function(t,n,e){var o;return null==e&&(e=s),o=t[0],t[0]=n,b(t,0,e),o},a=function(t,n,e){var o;return null==e&&(e=s),t.length&&e(t[0],n)<0&&(n=(o=[t[0],n])[0],t[0]=o[1],b(t,0,e)),n},p=function(t,n){var e,o,r,i,p,l;for(null==n&&(n=s),p=[],o=0,r=(i=function(){l=[];for(var n=0,e=u(t.length/2);0<=e?n<e:n>e;0<=e?n++:n--)l.push(n);return l}.apply(this).reverse()).length;o<r;o++)e=i[o],p.push(b(t,e,n));return p},m=function(t,n,e){var o;if(null==e&&(e=s),-1!==(o=t.indexOf(n)))return v(t,0,o,e),b(t,o,e)},g=function(t,n,e){var o,r,i,u,l;if(null==e&&(e=s),!(r=t.slice(0,n)).length)return r;for(p(r,e),i=0,u=(l=t.slice(n)).length;i<u;i++)o=l[i],a(r,o,e);return r.sort(e).reverse()},y=function(t,n,e){var o,r,i,u,c,a,f,g,y;if(null==e&&(e=s),10*n<=t.length){if(!(i=t.slice(0,n).sort(e)).length)return i;for(r=i[i.length-1],u=0,a=(f=t.slice(n)).length;u<a;u++)e(o=f[u],r)<0&&(h(i,o,0,null,e),i.pop(),r=i[i.length-1]);return i}for(p(t,e),y=[],c=0,g=d(n,t.length);0<=g?c<g:c>g;0<=g?++c:--c)y.push(l(t,e));return y},v=function(t,n,e,o){var r,i,u;for(null==o&&(o=s),r=t[e];e>n&&o(r,i=t[u=e-1>>1])<0;)t[e]=i,e=u;return t[e]=r},b=function(t,n,e){var o,r,i,u,p;for(null==e&&(e=s),r=t.length,p=n,i=t[n],o=2*n+1;o<r;)(u=o+1)<r&&!(e(t[o],t[u])<0)&&(o=u),t[n]=t[o],o=2*(n=o)+1;return t[n]=i,v(t,p,n,e)},e=function(){function t(t){this.cmp=null!=t?t:s,this.nodes=[]}return t.push=c,t.pop=l,t.replace=f,t.pushpop=a,t.heapify=p,t.updateItem=m,t.nlargest=g,t.nsmallest=y,t.prototype.push=function(t){return c(this.nodes,t,this.cmp)},t.prototype.pop=function(){return l(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return f(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return p(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return m(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var n;return(n=new t).nodes=this.nodes.slice(0),n},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(o=function(){return e})?o.apply(n,r):o)||(t.exports=i)}).call(this)},function(t,n,e){"use strict";e.r(n);var o=e(0),r=e.n(o);const i=(t,n)=>[t.coordinates,n.coordinates],s=t=>Math.sqrt(Math.pow(t[0][0]-t[1][0],2)+Math.pow(t[0][1]-t[1][1],2)),u=(t,n)=>n/(t/1e3);self.addEventListener("message",async({data:t})=>{const n=t.buildings,e=await(async(t,n)=>{const e=new r.a((t,n)=>t.weight-n.weight);for(var o=0;o<t.length;o++)for(var u=o;u<t.length;u++)if(t[o]!==t[u]){const r=i(t[o],t[u]),p=s(r);p<=n&&e.push({from:t[o],to:t[u],line:r,length:p,weight:p})}return e})(n,t.maxLineLength),o=await(async t=>{const n=[];for(var e=0;e<t.length;e++){const o={id:e,totalLength:0,noApartments:t[e].noApartments,edges:[],buildings:[t[e]]};n[t[e].id]=o}return n})(n);console.log("Buildings",n.length,"Edges",e.size(),"Index",o.length),await(async(t,n,e)=>{const o=t.size();for(;t.size()>0;){const r=t.pop(),i=n[r.from.id],s=n[r.to.id];if(i===s)continue;const p=i.totalLength+s.totalLength+r.length,l=i.noApartments+s.noApartments,c=u(p,l);t.size()%1e3==0&&self.postMessage({status:"progress",total:o,remaining:t.size()}),c<e||(i.totalLength=p,i.noApartments=l,i.edges.push(r.line),i.edges=i.edges.concat(s.edges),i.buildings=i.buildings.concat(s.buildings),s.buildings.forEach(t=>{n[t.id]=i}))}})(e,o,t.targetDensity);const p=await(async(t,n)=>{const e=[];return t.forEach(t=>{e.indexOf(t)<0&&e.push(t)}),e.filter(t=>t.noApartments>=n)})(o,t.targetNoApartments);self.postMessage({status:"done",trees:p})})}]);
//# sourceMappingURL=Calculator.b84c1bc631d303a6dd50.js.map